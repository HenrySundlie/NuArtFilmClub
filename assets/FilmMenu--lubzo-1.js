import{t as e,b as I,a as c,j as i}from"./index-CN9MY1s_.js";import{L as P,r as y}from"./react-Afj6T7yh.js";import{f as x}from"./FilmStore-CSGdgoBV.js";import{a as s}from"./emotion-CuswJqH_.js";import{B as j}from"./Page.styles-BDG2ZL7H.js";import{u as D}from"./useAutoFitText-BgAafCc6.js";const L=s("div",{target:"elutsbk9"})("--radius:16px;--border:1px solid ",e.colors.border,";--ring:2px solid ",e.colors.accent,";--shadow:",e.shadows.lg,";min-height:100dvh;color:",e.colors.text.primary,`;background:radial-gradient(
      1200px 500px at 50% -10%,
      rgba(255, 255, 255, 0.06),
      transparent
    ),`,e.colors.background,";padding:clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,");-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;",e.breakpoints.mobile,"{padding:",e.spacing.md,";}"),B=s("h1",{target:"elutsbk8"})("margin:0 0 clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,`);text-align:left;letter-spacing:0.04em;line-height:1.08;font-weight:400;font-size:clamp(
    `,e.typography.h1.mobile.fontSize,`,
    4vw,
    `,e.typography.h1.fontSize,`
  );color:#ffffff;background:none;-webkit-background-clip:initial;background-clip:initial;position:relative;z-index:0;text-wrap:balance;`,e.breakpoints.mobile,"{max-width:calc(100% - 64px);display:block;}"),v=s("div",{target:"elutsbk7"})("max-width:1100px;margin:0 auto;display:grid;gap:clamp(",e.spacing.md,", 2.5vw, ",e.spacing.lg,");grid-template-columns:1fr;",e.breakpoints.desktop,"{grid-template-columns:repeat(2, minmax(0, 1fr));}",e.breakpoints.mobile,"{gap:",e.spacing.md,";}"),g=s(P,{target:"elutsbk6"})("position:relative;display:grid;grid-template-columns:clamp(120px, 30%, 210px) 1fr;align-items:stretch;text-decoration:none;border-radius:",e.radii.md,";overflow:clip;border:1px solid ",e.colors.text.light,";background:",e.surfaces.elevatedOverlay,",",e.colors.surfaceDeep,";box-shadow:none;transition:filter 220ms ease,background 220ms ease;min-height:clamp(150px, 18vw, 180px);&:hover{background:",e.surfaces.subtleOverlay,",",e.colors.surface,";filter:saturate(1.02) contrast(1.01);}&:focus-visible{outline:var(--ring);outline-offset:3px;}&.compact{min-height:clamp(85px, 11vw, 118px);grid-template-columns:clamp(100px, 25%, 170px) 1fr;}",e.breakpoints.mobile,"{grid-template-columns:clamp(110px, 48%, 200px) 1fr;min-height:160px;&.compact{min-height:100px;grid-template-columns:clamp(95px, 44%, 150px) 1fr;}}"),k=s("img",{target:"elutsbk5"})("width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.03) contrast(1.02);transform:translateZ(0);transition:transform 450ms cubic-bezier(0.2, 0.7, 0, 1);",g,":hover &{transform:scale(1.03);}",e.breakpoints.mobile,"{height:100%;}",g,".compact &{aspect-ratio:2/3;height:100%;}"),T=s("div",{target:"elutsbk4"})("padding:clamp(",e.spacing.md,", 2vw, ",e.spacing.lg,");display:grid;align-content:center;gap:calc(",e.spacing.sm," * 0.75);color:",e.colors.text.primary,";min-width:0;",g,".compact &{padding:calc(",e.spacing.xs," + 4px) clamp(",e.spacing.md,", 4vw, ",e.spacing.lg,");gap:",e.spacing.xs,";justify-items:center;text-align:center;align-content:center;}"),C=s("h2",{target:"elutsbk3"})("margin:0;color:",e.colors.text.primary,`;font-size:clamp(
    `,e.typography.h2.mobile.fontSize,`,
    2.2vw,
    `,e.typography.h2.fontSize,`
  );font-weight:400;line-height:1.2;letter-spacing:0.01em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;`),E=s("p",{target:"elutsbk2"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),F=s("h2",{target:"elutsbk1"})("position:relative;display:flex;align-items:center;justify-content:center;gap:1.25rem;margin:0 0 1.25rem;font-weight:500;letter-spacing:0.02em;text-align:center;font-size:clamp(1.5rem, 2.5vw, 2rem);color:",e.colors.text.primary,";text-wrap:balance;&::before,&::after{content:'';flex:1 1 auto;height:1px;background:",e.colors.text.primary,";max-width:420px;opacity:0.8;}&::before{margin-left:clamp(0.5rem, 2vw, 2rem);}&::after{margin-right:clamp(0.5rem, 2vw, 2rem);}",e.breakpoints.mobile,"{gap:0.85rem;font-size:clamp(1.4rem, 5.5vw, 1.75rem);}"),U=s("p",{target:"elutsbk0"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),z=({text:d})=>{const h=typeof window<"u"?window.matchMedia("(max-width: 420px)").matches:!1,p=D({maxLines:2,minFontSizePx:h?14:12,deps:[d,h]});return i(C,{ref:p,children:d})},H=I(()=>{y.useEffect(()=>{x.fetchFilms()},[]);const d=t=>{if(!t)return"";const o=typeof t=="string"?t:String(t);return(o.includes("T")?new Date(o):new Date(`${o}T00:00:00`)).toLocaleDateString()},h=D({maxLines:1,minFontSizePx:18}),{upcomingFilms:u,previousFilms:p}=y.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const o=n=>(n||[]).filter(Boolean).map(r=>new Date(r+(r.includes("T")?"":"T00:00:00")).getTime()).sort((r,a)=>r-a),l=x.films.reduce((n,r)=>{const a=o(r.runDates);return a.some(b=>b>=t.getTime())?n.upcoming.push({film:r,dates:a}):n.previous.push({film:r,dates:a}),n},{upcoming:[],previous:[]});return l.upcoming.sort((n,r)=>{const a=m=>m.find(b=>b>=t.getTime())??Number.POSITIVE_INFINITY;return a(n.dates)-a(r.dates)}),l.previous.sort((n,r)=>{const a=m=>m[m.length-1]??Number.NEGATIVE_INFINITY;return a(r.dates)-a(n.dates)}),{upcomingFilms:l.upcoming.map(n=>n.film),previousFilms:l.previous.map(n=>n.film)}},[x.films]),N=t=>c(g,{to:`/film/${t.id}`,children:[i(k,{src:t.img,alt:t.title,loading:"lazy"}),c(T,{children:[i(z,{text:t.title}),i(E,{children:t.runDates&&t.runDates.length>0?t.runDates.slice().sort((o,l)=>new Date(o).getTime()-new Date(l).getTime()).map(d).join(" Â· "):"TBA"}),i(U,{children:t.runTime}),t.ticketLink&&i(j,{onClick:o=>{o.preventDefault(),o.stopPropagation(),window.open(t.ticketLink,"_blank","noopener,noreferrer")},children:"Buy Tickets"})]})]},t.id),S=t=>c(g,{to:`/film/${t.id}`,className:"compact",children:[i(k,{src:t.img,alt:t.title,loading:"lazy"}),i(T,{style:{gap:"0"},children:i(z,{text:t.title})})]},t.id),w=u.length>0,f=p.length>0;return c(L,{children:[i(B,{ref:h,children:"Films"}),w&&c("section",{"aria-labelledby":"upcoming-heading",style:{marginBottom:f?"3rem":0},children:[i(F,{id:"upcoming-heading",children:"Upcoming"}),i(v,{children:u.map(N)}),!u.length&&i("p",{style:{opacity:.8},children:"No upcoming films scheduled."})]}),f&&c("section",{"aria-labelledby":"previous-heading",style:{marginTop:"3.5rem"},children:[i(F,{id:"previous-heading",children:"Previous"}),i(v,{children:p.map(S)}),!p.length&&i("p",{style:{opacity:.8},children:"No past films yet."})]}),!w&&!f&&i("p",{style:{opacity:.8},children:"No films available."})]})});export{H as default};
