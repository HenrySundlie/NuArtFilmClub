import{t as e,b as j,a as g,j as i}from"./index-DsQOLQzc.js";import{L as C,r as u}from"./react-Afj6T7yh.js";import{f as w}from"./FilmStore-D215exSd.js";import{a as s}from"./emotion-CuswJqH_.js";import{u as N,B as L}from"./useAutoFitText-c5jkJlf9.js";const U=s("div",{target:"elutsbk9"})("--radius:16px;--border:1px solid ",e.colors.border,";--ring:2px solid ",e.colors.accent,";--shadow:",e.shadows.lg,";min-height:100dvh;color:",e.colors.text.primary,";background:",e.colors.background,";padding:clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,");-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;",e.breakpoints.mobile,"{padding:",e.spacing.md,";}"),B=s("h1",{target:"elutsbk8"})("margin:0 auto clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,`);max-width:1100px;padding-inline:0;text-align:left;letter-spacing:0.04em;line-height:1.08;font-weight:400;font-size:clamp(
    `,e.typography.h1.mobile.fontSize,`,
    4vw,
    `,e.typography.h1.fontSize,`
  );color:#ffffff;background:none;-webkit-background-clip:initial;background-clip:initial;position:relative;z-index:0;text-wrap:balance;`,e.breakpoints.mobile,"{max-width:100%;padding-inline:0;display:block;}"),v=s("div",{target:"elutsbk7"})("max-width:1100px;margin:0 auto;display:grid;gap:clamp(",e.spacing.md,", 2.5vw, ",e.spacing.lg,");grid-template-columns:1fr;",e.breakpoints.desktop,"{grid-template-columns:repeat(2, minmax(0, 1fr));}",e.breakpoints.mobile,"{gap:",e.spacing.md,";}"),h=s(C,{target:"elutsbk6"})("position:relative;display:grid;grid-template-columns:clamp(120px, 30%, 210px) 1fr;align-items:stretch;text-decoration:none;border-radius:",e.radii.md,";overflow:clip;border:1px solid ",e.colors.border,";background:",e.colors.surface,";box-shadow:none;transition:filter 220ms ease,background 220ms ease,box-shadow 220ms ease;min-height:clamp(150px, 18vw, 180px);&:hover{background:",e.colors.surface,";box-shadow:",e.shadows.card,";filter:saturate(1.02) contrast(1.01);}&:focus-visible{outline:var(--ring);outline-offset:3px;}&.compact{min-height:clamp(85px, 11vw, 118px);grid-template-columns:clamp(100px, 25%, 170px) 1fr;}",e.breakpoints.mobile,"{grid-template-columns:clamp(95px, 34%, 160px) 1fr;min-height:150px;&.compact{min-height:100px;grid-template-columns:clamp(85px, 32%, 140px) 1fr;}}"),y=s("img",{target:"elutsbk5"})("width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.03) contrast(1.02);transform:translateZ(0);transition:transform 450ms cubic-bezier(0.2, 0.7, 0, 1);",h,":hover &{transform:scale(1.03);}",e.breakpoints.mobile,"{height:100%;}",h,".compact &{aspect-ratio:2/3;height:100%;}"),F=s("div",{target:"elutsbk4"})("padding:clamp(",e.spacing.md,", 2vw, ",e.spacing.lg,");display:grid;grid-template-areas:'title title' 'details ticket';grid-template-columns:1fr 1fr;grid-auto-rows:auto 1fr;align-content:start;align-items:start;gap:calc(",e.spacing.sm," * 0.75) ",e.spacing.md,";color:",e.colors.text.primary,";min-width:0;.film-title-row{grid-area:title;align-self:start;}.details{grid-area:details;display:flex;flex-direction:column;gap:1px;align-items:flex-start;}.ticket-btn{grid-area:ticket;display:flex;align-items:center;justify-content:center;padding:0.65rem 1rem;width:100%;font-size:clamp(0.95rem, 0.8rem + 0.5vw, 1.15rem);line-height:1.15;font-weight:600;font-family:",e.typography.fontFamily,";white-space:normal;margin-right:0;align-self:stretch;background:",e.colors.surfaceDeep,";border:1px solid ",e.colors.text.light,";color:#ffffff;border-radius:",e.radii.md,";transition:background ",e.transitions.default,",color ",e.transitions.default,",border-color ",e.transitions.default,",box-shadow ",e.transitions.default,";&:hover{background:",e.colors.surfaceDeep,";filter:brightness(1.1);}&:active{filter:brightness(0.95);}&:focus-visible{outline:var(--ring);outline-offset:3px;}",e.breakpoints.desktop,"{background:#141414;&:hover{background:#181818;}&:active{background:#101010;}}}.film-title-row>*{margin-bottom:2px;}",e.breakpoints.mobile,"{grid-template-areas:'title' 'details' 'ticket';grid-template-columns:1fr;align-content:center;align-items:center;text-align:center;gap:calc(",e.spacing.sm," * 0.6);.film-title-row{align-self:center;}.details{align-items:center;}.ticket-btn{width:100%;aspect-ratio:auto;padding:0.7rem 1rem;font-size:clamp(0.98rem, 0.92rem + 0.6vw, 1.2rem);margin-right:0;}}",h,".compact &{padding:calc(",e.spacing.xs," + 4px) clamp(",e.spacing.md,", 4vw, ",e.spacing.lg,");gap:",e.spacing.xs,";justify-items:center;text-align:center;align-content:center;grid-template-areas:'title';grid-template-columns:1fr;}"),E=s("h2",{target:"elutsbk3"})("margin:0;color:",e.colors.text.primary,`;font-size:clamp(
    `,e.typography.h2.mobile.fontSize,`,
    2.2vw,
    `,e.typography.h2.fontSize,`
  );font-weight:400;line-height:1.2;letter-spacing:0.01em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;`),A=s("p",{target:"elutsbk2"})("margin:0;color:",e.colors.text.primary,";font-size:clamp(0.95rem, 0.7rem + 0.55vw, 1.2rem);line-height:1.25;&::before{margin-right:0.5ch;opacity:0.9;}"),T=s("h2",{target:"elutsbk1"})("position:relative;display:flex;align-items:center;justify-content:center;gap:1.25rem;margin:0 0 1.25rem;font-weight:500;letter-spacing:0.02em;text-align:center;font-size:clamp(1.5rem, 2.5vw, 2rem);color:",e.colors.text.primary,";text-wrap:balance;&::before,&::after{content:'';flex:1 1 auto;height:1px;background:",e.colors.text.primary,";max-width:420px;opacity:0.8;}&::before{margin-left:clamp(0.5rem, 2vw, 2rem);}&::after{margin-right:clamp(0.5rem, 2vw, 2rem);}",e.breakpoints.mobile,"{gap:0.85rem;font-size:clamp(1.4rem, 5.5vw, 1.75rem);}"),M=s("p",{target:"elutsbk0"})("margin:0;color:",e.colors.text.primary,";font-size:clamp(0.95rem, 0.7rem + 0.55vw, 1.2rem);line-height:1.25;&::before{margin-right:0.5ch;opacity:0.9;}"),f=n=>{const r=n.includes("T")?n:`${n}T00:00:00`,l=new Date(r);return isNaN(l.getTime())?void 0:l},_=n=>(n||[]).map(r=>f(r)).filter(r=>!!r).map(r=>r.getTime()).sort((r,l)=>r-l),z=({text:n})=>{const r=typeof window<"u"?window.matchMedia("(max-width: 420px)").matches:!1,b=N({maxLines:2,minFontSizePx:r?14:12,deps:[n,r]});return i(E,{ref:b,children:n})},Y=j(()=>{u.useEffect(()=>{w.fetchFilms()},[]);const n=N({maxLines:1,minFontSizePx:18}),{upcomingFilms:r,previousFilms:l}=u.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const o=w.films.reduce((a,c)=>{const d=_(c.runDates);return d.some(P=>P>=t.getTime())?a.upcoming.push({film:c,times:d}):a.previous.push({film:c,times:d}),a},{upcoming:[],previous:[]}),m=(a,c=t.getTime())=>a.find(d=>d>=c)??Number.POSITIVE_INFINITY,p=a=>a[a.length-1]??Number.NEGATIVE_INFINITY;return o.upcoming.sort((a,c)=>m(a.times)-m(c.times)),o.previous.sort((a,c)=>p(c.times)-p(a.times)),{upcomingFilms:o.upcoming.map(a=>a.film),previousFilms:o.previous.map(a=>a.film)}},[w.films]),b=u.useCallback(t=>{if(!t.runDates?.length)return"TBA";const o={month:"short",day:"numeric"};return t.runDates.slice().sort((m,p)=>(f(m)?.getTime()??0)-(f(p)?.getTime()??0)).map(m=>{const p=f(m);return p?p.toLocaleDateString(void 0,o):""}).filter(Boolean).join(" Â· ")},[]),D=u.useCallback((t,o)=>{t.preventDefault(),t.stopPropagation(),window.open(o,"_blank","noopener,noreferrer")},[]),I=t=>{const o=t.ticketLink?.trim();return g(h,{to:`/film/${t.id}`,children:[i(y,{src:t.img,alt:t.title,loading:"lazy"}),g(F,{children:[i("div",{className:"film-title-row",children:i(z,{text:t.title})}),g("div",{className:"details",children:[i(A,{children:b(t)}),i(M,{children:t.runTime})]}),o&&i(L,{className:"ticket-btn",onClick:m=>D(m,o),children:"Buy Tickets"})]})]},t.id)},S=t=>g(h,{to:`/film/${t.id}`,className:"compact",children:[i(y,{src:t.img,alt:t.title,loading:"lazy"}),i(F,{style:{gap:"0"},children:i(z,{text:t.title})})]},t.id),k=r.length>0,x=l.length>0;return g(U,{children:[i(B,{ref:n,children:"Films"}),k&&g("section",{"aria-labelledby":"upcoming-heading",style:{marginBottom:x?"3rem":0},children:[i(T,{id:"upcoming-heading",children:"Upcoming"}),i(v,{children:r.map(I)}),!r.length&&i("p",{style:{opacity:.8},children:"No upcoming films scheduled."})]}),x&&g("section",{"aria-labelledby":"previous-heading",style:{marginTop:"3.5rem"},children:[i(T,{id:"previous-heading",children:"Previous"}),i(v,{children:l.map(S)}),!l.length&&i("p",{style:{opacity:.8},children:"No past films yet."})]}),!k&&!x&&i("p",{style:{opacity:.8},children:"No films available."})]})});export{Y as default};
