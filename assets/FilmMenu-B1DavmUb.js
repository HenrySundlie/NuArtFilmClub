import{t as e,b as z,a as p,j as i}from"./index-56B9N-5E.js";import{L as D,r as y}from"./react-Afj6T7yh.js";import{f as b}from"./FilmStore-DF4k3uBG.js";import{a as s}from"./emotion-CuswJqH_.js";import{B as S}from"./Page.styles-DYQO38Mp.js";import{u as T}from"./useAutoFitText-BgAafCc6.js";const I=s("div",{target:"elutsbk9"})("--radius:16px;--border:1px solid ",e.colors.border,";--ring:2px solid ",e.colors.accent,";--shadow:",e.shadows.lg,";min-height:100dvh;color:",e.colors.text.primary,`;background:radial-gradient(
      1200px 500px at 50% -10%,
      rgba(255, 255, 255, 0.06),
      transparent
    ),`,e.colors.background,";padding:clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,");-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;",e.breakpoints.mobile,"{padding:",e.spacing.md,";}"),N=s("h1",{target:"elutsbk8"})("margin:0 0 clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,`);text-align:left;letter-spacing:0.04em;line-height:1.08;font-weight:400;font-size:clamp(
    `,e.typography.h1.mobile.fontSize,`,
    4vw,
    `,e.typography.h1.fontSize,`
  );color:#ffffff;background:none;-webkit-background-clip:initial;background-clip:initial;position:relative;z-index:0;text-wrap:balance;`,e.breakpoints.mobile,"{max-width:calc(100% - 64px);display:block;}"),k=s("div",{target:"elutsbk7"})("max-width:1100px;margin:0 auto;display:grid;gap:clamp(",e.spacing.md,", 2.5vw, ",e.spacing.lg,");grid-template-columns:1fr;",e.breakpoints.desktop,"{grid-template-columns:repeat(2, minmax(0, 1fr));}",e.breakpoints.mobile,"{gap:",e.spacing.md,";}"),F=s(D,{target:"elutsbk6"})("position:relative;display:grid;grid-template-columns:clamp(110px, 22%, 180px) 1fr;align-items:stretch;text-decoration:none;border-radius:",e.radii.md,";overflow:clip;border:1px solid ",e.colors.text.light,";background:",e.surfaces.elevatedOverlay,",",e.colors.surfaceDeep,";box-shadow:none;transition:filter 220ms ease,background 220ms ease;min-height:clamp(150px, 18vw, 180px);&:hover{background:",e.surfaces.subtleOverlay,",",e.colors.surface,";filter:saturate(1.02) contrast(1.01);}&:focus-visible{outline:var(--ring);outline-offset:3px;}",e.breakpoints.mobile,"{grid-template-columns:clamp(110px, 40%, 180px) 1fr;min-height:160px;}"),P=s("img",{target:"elutsbk5"})("width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.03) contrast(1.02);transform:translateZ(0);transition:transform 450ms cubic-bezier(0.2, 0.7, 0, 1);",F,":hover &{transform:scale(1.03);}",e.breakpoints.mobile,"{height:100%;}"),L=s("div",{target:"elutsbk4"})("padding:clamp(",e.spacing.md,", 2vw, ",e.spacing.lg,");display:grid;align-content:center;gap:calc(",e.spacing.sm," * 0.75);color:",e.colors.text.primary,";min-width:0;"),j=s("h2",{target:"elutsbk3"})("margin:0;color:",e.colors.text.primary,`;font-size:clamp(
    `,e.typography.h2.mobile.fontSize,`,
    2.2vw,
    `,e.typography.h2.fontSize,`
  );line-height:1.2;letter-spacing:0.01em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;`),B=s("p",{target:"elutsbk2"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),v=s("h2",{target:"elutsbk1"})("position:relative;display:flex;align-items:center;justify-content:center;gap:1.25rem;margin:0 0 1.25rem;font-weight:500;letter-spacing:0.02em;text-align:center;font-size:clamp(1.5rem, 2.5vw, 2rem);color:",e.colors.text.primary,";text-wrap:balance;&::before,&::after{content:'';flex:1 1 auto;height:1px;background:",e.colors.text.primary,";max-width:420px;opacity:0.8;}&::before{margin-left:clamp(0.5rem, 2vw, 2rem);}&::after{margin-right:clamp(0.5rem, 2vw, 2rem);}",e.breakpoints.mobile,"{gap:0.85rem;font-size:clamp(1.4rem, 5.5vw, 1.75rem);}"),E=s("p",{target:"elutsbk0"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),A=({text:g})=>{const d=typeof window<"u"?window.matchMedia("(max-width: 420px)").matches:!1,c=T({maxLines:2,minFontSizePx:d?14:12,deps:[g,d]});return i(j,{ref:c,children:g})},H=z(()=>{y.useEffect(()=>{b.fetchFilms()},[]);const g=t=>{if(!t)return"";const a=typeof t=="string"?t:String(t);return(a.includes("T")?new Date(a):new Date(`${a}T00:00:00`)).toLocaleDateString()},d=T({maxLines:1,minFontSizePx:18}),{upcomingFilms:h,previousFilms:c}=y.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const a=r=>(r||[]).filter(Boolean).map(n=>new Date(n+(n.includes("T")?"":"T00:00:00")).getTime()).sort((n,o)=>n-o),l=b.films.reduce((r,n)=>{const o=a(n.runDates);return o.some(f=>f>=t.getTime())?r.upcoming.push({film:n,dates:o}):r.previous.push({film:n,dates:o}),r},{upcoming:[],previous:[]});return l.upcoming.sort((r,n)=>{const o=m=>m.find(f=>f>=t.getTime())??Number.POSITIVE_INFINITY;return o(r.dates)-o(n.dates)}),l.previous.sort((r,n)=>{const o=m=>m[m.length-1]??Number.NEGATIVE_INFINITY;return o(n.dates)-o(r.dates)}),{upcomingFilms:l.upcoming.map(r=>r.film),previousFilms:l.previous.map(r=>r.film)}},[b.films]),x=t=>p(F,{to:`/film/${t.id}`,children:[i(P,{src:t.img,alt:t.title,loading:"lazy"}),p(L,{children:[i(A,{text:t.title}),i(B,{children:t.runDates&&t.runDates.length>0?t.runDates.slice().sort((a,l)=>new Date(a).getTime()-new Date(l).getTime()).map(g).join(" Â· "):"TBA"}),i(E,{children:t.runTime}),t.ticketLink&&i(S,{onClick:a=>{a.preventDefault(),a.stopPropagation(),window.open(t.ticketLink,"_blank","noopener,noreferrer")},children:"Buy Tickets"})]})]},t.id),w=h.length>0,u=c.length>0;return p(I,{children:[i(N,{ref:d,children:"Films"}),w&&p("section",{"aria-labelledby":"upcoming-heading",style:{marginBottom:u?"3rem":0},children:[i(v,{id:"upcoming-heading",children:"Upcoming"}),i(k,{children:h.map(x)}),!h.length&&i("p",{style:{opacity:.8},children:"No upcoming films scheduled."})]}),u&&p("section",{"aria-labelledby":"previous-heading",style:{marginTop:"3.5rem"},children:[i(v,{id:"previous-heading",children:"Previous"}),i(k,{children:c.map(x)}),!c.length&&i("p",{style:{opacity:.8},children:"No past films yet."})]}),!w&&!u&&i("p",{style:{opacity:.8},children:"No films available."})]})});export{H as default};
