import{t,j as a,b as v,a as o,S as D}from"./index-D65FvdaF.js";import{f as g}from"./FilmStore-DJ13jzLJ.js";import{g as T,r as u}from"./react-Afj6T7yh.js";import{a as i}from"./emotion-CuswJqH_.js";import{B as S}from"./Page.styles-DfUl_XwG.js";import{L as z}from"./LinkButton-BtRIgNSo.js";const h=i("div",{target:"eb0ka577"})("--radius:18px;--border:1px solid ",t.colors.border,";--shadow:",t.shadows.lg,";min-height:100dvh;color:",t.colors.text.primary,`;background:radial-gradient(
      1200px 500px at 50% -10%,
      rgba(255, 255, 255, 0.06),
      transparent
    ),`,t.colors.background,";padding:clamp(",t.spacing.lg,", 3vw, ",t.spacing.xl,");-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;"),I=i("div",{target:"eb0ka576"})("max-width:min(1200px, 92vw);margin:0 auto;display:grid;grid-template-columns:minmax(260px, 1fr) minmax(0, 1.8fr);gap:clamp(",t.spacing.lg,", 3vw, ",t.spacing.xl,");align-items:start;",t.breakpoints.mobile,"{grid-template-columns:1fr;gap:",t.spacing.lg,";}"),L=i("h1",{target:"eb0ka575"})("grid-column:1/-1;margin:0 0 clamp(",t.spacing.md,", 2vw, ",t.spacing.lg,`);font-size:clamp(
    `,t.typography.h1.mobile.fontSize,`,
    4vw,
    `,t.typography.h1.fontSize,`
  );line-height:1.1;text-align:center;letter-spacing:0.08em;font-weight:400;color:transparent;background:`,t.textStyles.gradientPrimary,";-webkit-background-clip:text;background-clip:text;text-wrap:balance;"),$=i("img",{target:"eb0ka574"})("width:100%;aspect-ratio:2/3;object-fit:cover;border-radius:",t.radii.md,";border:1px solid ",t.colors.text.light,";box-shadow:none;transform:translateZ(0);transition:transform 450ms cubic-bezier(0.2, 0.7, 0, 1),filter 250ms ease;position:sticky;top:clamp(12px, 6vh, 48px);@media (hover: hover) and (prefers-reduced-motion: no-preference){&:hover{filter:saturate(1.03) contrast(1.01);}}",t.breakpoints.mobile,"{position:static;aspect-ratio:auto;height:auto;}"),C=i("div",{target:"eb0ka573"})("position:relative;border:1px solid ",t.colors.text.light,";border-radius:",t.radii.md,";background:",t.surfaces.elevatedOverlay,",",t.colors.surfaceDeep,";padding:clamp(",t.spacing.lg,", 2.5vw, ",t.spacing.xl,");box-shadow:none;display:grid;gap:",t.spacing.md,";backdrop-filter:saturate(1.2) blur(8px);color:",t.colors.text.primary,";"),l=i("p",{target:"eb0ka572"})("margin:0;display:grid;grid-template-columns:max(110px, 28%) 1fr;align-items:baseline;gap:calc(",t.spacing.md," * 0.5);line-height:1.6;color:",t.colors.text.primary,";"),d=i("strong",{target:"eb0ka571"})("color:",t.colors.text.primary,";letter-spacing:0.04em;text-transform:uppercase;font-size:0.85rem;"),j=i("p",{target:"eb0ka570"})("grid-column:1/-1;margin:clamp(",t.spacing.md,", 3vw, ",t.spacing.lg,") 0;color:",t.colors.text.primary,";font-size:clamp(1rem, 1.1vw, 1.125rem);line-height:1.85;text-wrap:pretty;hanging-punctuation:first allow-end;hyphens:auto;");function f(r){return r.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/,"Z")}function b(r,e){const n=e&&/^\d{1,2}:\d{2}$/.test(e)?e:"19:00";return new Date(`${r}T${n}:00`)}function P({title:r,startDate:e,startTime:n,endTime:s,durationMinutes:c=120,location:m,details:w}){if(!e||!r)return null;const p=b(e,n),k=s?b(e,s):new Date(p.getTime()+c*6e4),y=`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:r,dates:`${f(p)}/${f(k)}`,details:w??"",location:m??"",ctz:Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}).toString()}`;return a(z,{to:y,target:"_blank",rel:"noopener noreferrer","aria-label":"Add to Google Calendar",children:"Add to Google Calendar"})}const x=r=>{if(!r)return"";const e=typeof r=="string"?r:String(r);return(e.includes("T")?new Date(e):new Date(`${e}T00:00:00`)).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})};function A(r){if(!r||r.length===0)return;const e=new Date;e.setHours(0,0,0,0);const n=r.filter(Boolean).map(c=>new Date(c).getTime()).sort((c,m)=>c-m),s=n.find(c=>c>=e.getTime())??n[n.length-1];return s?new Date(s).toISOString().slice(0,10):void 0}const G=v(()=>{const{id:r}=T();u.useEffect(()=>{g.films.length===0&&g.fetchFilms()},[]);const e=u.useMemo(()=>g.films.find(n=>n.id===Number(r)),[r]);return e?a(h,{children:o(I,{children:[a(L,{children:e.title}),a($,{as:D,src:e.img,alt:e.title,loading:"lazy"}),o(C,{children:[o(l,{children:[a(d,{children:"Year:"})," ",e.year]}),o(l,{children:[a(d,{children:"Director:"})," ",e.director]}),o(l,{children:[a(d,{children:"Notable Actors:"})," ",e.actors?.join(", ")]}),o(l,{children:[a(d,{children:"Duration:"})," ",e.duration," minutes"]}),o(l,{children:[a(d,{children:"Showings:"})," ",e.runDates&&e.runDates.length>1?e.runDates.slice().sort((n,s)=>new Date(n).getTime()-new Date(s).getTime()).map(x).join(" Â· "):x(e.runDates?.[0])]}),e.runTime&&o(l,{children:[a(d,{children:"Time:"})," ",e.runTime]}),a(S,{onClick:n=>{n.stopPropagation(),window.open(e.ticketLink,"_blank","noopener,noreferrer")},children:"Buy Tickets"}),a(P,{title:e.title,startDate:A(e.runDates)??e.runDates?.[0],startTime:e.runTime,durationMinutes:e.duration,location:"Moscow, ID",details:e.description})]}),a(j,{children:e.description})]})}):a(h,{children:"Film not found"})});export{G as default};
