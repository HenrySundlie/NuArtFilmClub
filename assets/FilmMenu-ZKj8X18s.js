import{t as e,b as j,a as m,j as a}from"./index-DT_fQTWH.js";import{L as C,r as h}from"./react-Afj6T7yh.js";import{f as x}from"./FilmStore-DU43PQDL.js";import{a as s}from"./emotion-CuswJqH_.js";import{u as N,B as L}from"./useAutoFitText-CMtt_Th1.js";const U=s("div",{target:"elutsbk9"})("--radius:16px;--border:1px solid ",e.colors.border,";--ring:2px solid ",e.colors.accent,";--shadow:",e.shadows.lg,";min-height:100dvh;color:",e.colors.text.primary,`;background:radial-gradient(
      1200px 500px at 50% -10%,
      rgba(255, 255, 255, 0.06),
      transparent
    ),`,e.colors.background,";padding:clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,");-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;",e.breakpoints.mobile,"{padding:",e.spacing.md,";}"),B=s("h1",{target:"elutsbk8"})("margin:0 auto clamp(",e.spacing.lg,", 3vw, ",e.spacing.xl,`);max-width:1100px;padding-inline:0;text-align:left;letter-spacing:0.04em;line-height:1.08;font-weight:400;font-size:clamp(
    `,e.typography.h1.mobile.fontSize,`,
    4vw,
    `,e.typography.h1.fontSize,`
  );color:#ffffff;background:none;-webkit-background-clip:initial;background-clip:initial;position:relative;z-index:0;text-wrap:balance;`,e.breakpoints.mobile,"{max-width:100%;padding-inline:0;display:block;}"),k=s("div",{target:"elutsbk7"})("max-width:1100px;margin:0 auto;display:grid;gap:clamp(",e.spacing.md,", 2.5vw, ",e.spacing.lg,");grid-template-columns:1fr;",e.breakpoints.desktop,"{grid-template-columns:repeat(2, minmax(0, 1fr));}",e.breakpoints.mobile,"{gap:",e.spacing.md,";}"),d=s(C,{target:"elutsbk6"})("position:relative;display:grid;grid-template-columns:clamp(120px, 30%, 210px) 1fr;align-items:stretch;text-decoration:none;border-radius:",e.radii.md,";overflow:clip;border:1px solid ",e.colors.text.light,";background:",e.surfaces.elevatedOverlay,",",e.colors.surfaceDeep,";box-shadow:none;transition:filter 220ms ease,background 220ms ease;min-height:clamp(150px, 18vw, 180px);&:hover{background:",e.surfaces.subtleOverlay,",",e.colors.surface,";filter:saturate(1.02) contrast(1.01);}&:focus-visible{outline:var(--ring);outline-offset:3px;}&.compact{min-height:clamp(85px, 11vw, 118px);grid-template-columns:clamp(100px, 25%, 170px) 1fr;}",e.breakpoints.mobile,"{grid-template-columns:clamp(95px, 34%, 160px) 1fr;min-height:150px;&.compact{min-height:100px;grid-template-columns:clamp(85px, 32%, 140px) 1fr;}}"),v=s("img",{target:"elutsbk5"})("width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.03) contrast(1.02);transform:translateZ(0);transition:transform 450ms cubic-bezier(0.2, 0.7, 0, 1);",d,":hover &{transform:scale(1.03);}",e.breakpoints.mobile,"{height:100%;}",d,".compact &{aspect-ratio:2/3;height:100%;}"),F=s("div",{target:"elutsbk4"})("padding:clamp(",e.spacing.md,", 2vw, ",e.spacing.lg,");display:grid;grid-template-areas:'title title' 'details ticket';grid-template-columns:1fr 1fr;grid-auto-rows:auto 1fr;align-content:start;align-items:start;gap:calc(",e.spacing.sm," * 0.75) ",e.spacing.md,";color:",e.colors.text.primary,";min-width:0;.film-title-row{grid-area:title;align-self:start;}.details{grid-area:details;display:flex;flex-direction:column;gap:2px;align-items:flex-start;}.ticket-btn{grid-area:ticket;display:flex;align-items:center;justify-content:center;padding:0.65rem 1rem;width:100%;font-size:clamp(0.95rem, 0.8rem + 0.5vw, 1.15rem);line-height:1.15;font-weight:600;font-family:",e.typography.fontFamily,";white-space:normal;margin-right:0;align-self:stretch;}.film-title-row>*{margin-bottom:2px;}",e.breakpoints.mobile,"{grid-template-areas:'title' 'details' 'ticket';grid-template-columns:1fr;align-content:center;align-items:center;text-align:center;gap:calc(",e.spacing.sm," * 0.6);.film-title-row{align-self:center;}.details{align-items:center;}.ticket-btn{width:100%;aspect-ratio:auto;padding:0.7rem 1rem;font-size:clamp(0.98rem, 0.92rem + 0.6vw, 1.2rem);margin-right:0;}}",d,".compact &{padding:calc(",e.spacing.xs," + 4px) clamp(",e.spacing.md,", 4vw, ",e.spacing.lg,");gap:",e.spacing.xs,";justify-items:center;text-align:center;align-content:center;grid-template-areas:'title';grid-template-columns:1fr;}"),E=s("h2",{target:"elutsbk3"})("margin:0;color:",e.colors.text.primary,`;font-size:clamp(
    `,e.typography.h2.mobile.fontSize,`,
    2.2vw,
    `,e.typography.h2.fontSize,`
  );font-weight:400;line-height:1.2;letter-spacing:0.01em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;`),A=s("p",{target:"elutsbk2"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),T=s("h2",{target:"elutsbk1"})("position:relative;display:flex;align-items:center;justify-content:center;gap:1.25rem;margin:0 0 1.25rem;font-weight:500;letter-spacing:0.02em;text-align:center;font-size:clamp(1.5rem, 2.5vw, 2rem);color:",e.colors.text.primary,";text-wrap:balance;&::before,&::after{content:'';flex:1 1 auto;height:1px;background:",e.colors.text.primary,";max-width:420px;opacity:0.8;}&::before{margin-left:clamp(0.5rem, 2vw, 2rem);}&::after{margin-right:clamp(0.5rem, 2vw, 2rem);}",e.breakpoints.mobile,"{gap:0.85rem;font-size:clamp(1.4rem, 5.5vw, 1.75rem);}"),M=s("p",{target:"elutsbk0"})("margin:0;color:",e.colors.text.primary,";font-size:0.95rem;line-height:1.4;&::before{margin-right:0.5ch;opacity:0.9;}"),u=n=>{const i=n.includes("T")?n:`${n}T00:00:00`,l=new Date(i);return isNaN(l.getTime())?void 0:l},O=n=>(n||[]).map(i=>u(i)).filter(i=>!!i).map(i=>i.getTime()).sort((i,l)=>i-l),_=n=>{if(!n)return"";const i=u(n);return i?i.toLocaleDateString():""},z=({text:n})=>{const i=typeof window<"u"?window.matchMedia("(max-width: 420px)").matches:!1,f=N({maxLines:2,minFontSizePx:i?14:12,deps:[n,i]});return a(E,{ref:f,children:n})},Z=j(()=>{h.useEffect(()=>{x.fetchFilms()},[]);const n=N({maxLines:1,minFontSizePx:18}),{upcomingFilms:i,previousFilms:l}=h.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const o=x.films.reduce((r,c)=>{const g=O(c.runDates);return g.some(P=>P>=t.getTime())?r.upcoming.push({film:c,times:g}):r.previous.push({film:c,times:g}),r},{upcoming:[],previous:[]}),p=(r,c=t.getTime())=>r.find(g=>g>=c)??Number.POSITIVE_INFINITY,y=r=>r[r.length-1]??Number.NEGATIVE_INFINITY;return o.upcoming.sort((r,c)=>p(r.times)-p(c.times)),o.previous.sort((r,c)=>y(c.times)-y(r.times)),{upcomingFilms:o.upcoming.map(r=>r.film),previousFilms:o.previous.map(r=>r.film)}},[x.films]),f=h.useCallback(t=>t.runDates?.length?t.runDates.slice().sort((o,p)=>(u(o)?.getTime()??0)-(u(p)?.getTime()??0)).map(_).join(" Â· "):"TBA",[]),D=h.useCallback((t,o)=>{t.preventDefault(),t.stopPropagation(),window.open(o,"_blank","noopener,noreferrer")},[]),I=t=>{const o=t.ticketLink?.trim();return m(d,{to:`/film/${t.id}`,children:[a(v,{src:t.img,alt:t.title,loading:"lazy"}),m(F,{children:[a("div",{className:"film-title-row",children:a(z,{text:t.title})}),m("div",{className:"details",children:[a(A,{children:f(t)}),a(M,{children:t.runTime})]}),o&&a(L,{className:"ticket-btn",onClick:p=>D(p,o),children:"Buy Tickets"})]})]},t.id)},S=t=>m(d,{to:`/film/${t.id}`,className:"compact",children:[a(v,{src:t.img,alt:t.title,loading:"lazy"}),a(F,{style:{gap:"0"},children:a(z,{text:t.title})})]},t.id),w=i.length>0,b=l.length>0;return m(U,{children:[a(B,{ref:n,children:"Films"}),w&&m("section",{"aria-labelledby":"upcoming-heading",style:{marginBottom:b?"3rem":0},children:[a(T,{id:"upcoming-heading",children:"Upcoming"}),a(k,{children:i.map(I)}),!i.length&&a("p",{style:{opacity:.8},children:"No upcoming films scheduled."})]}),b&&m("section",{"aria-labelledby":"previous-heading",style:{marginTop:"3.5rem"},children:[a(T,{id:"previous-heading",children:"Previous"}),a(k,{children:l.map(S)}),!l.length&&a("p",{style:{opacity:.8},children:"No past films yet."})]}),!w&&!b&&a("p",{style:{opacity:.8},children:"No films available."})]})});export{Z as default};
